{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center mt-5">
    <div class="col-md-11">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="border-start border-4 border-success ps-3 text-white">ğŸ“Š å•†åº—è¨‚å–®ç®¡ç†</h2>
            <a href="{% url 'shops:shop_detail' user.shop.id %}" class="btn btn-outline-light">
                <i class="bi bi-arrow-left"></i> è¿”å›å•†åº—é¦–é 
            </a>
        </div>

        {% if sold_items %}
            <div class="card shadow bg-transparent border-secondary">
                <div class="card-body p-0 rounded-top-4">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle mb-0 text-white">
                            <thead class="text-white-50 border-bottom border-secondary">
                                <tr>
                                    <th class="fw-normal">è¨‚å–®ç·¨è™Ÿ</th>
                                    <th class="fw-normal">å•†å“åç¨±</th>
                                    <th class="fw-normal">è²·å®¶è³‡è¨Š</th>
                                    <th class="fw-normal">è¯çµ¡é›»è©±</th>
                                    <th class="fw-normal">æ•¸é‡</th>
                                    <th class="fw-normal">éŠ·å”®é‡‘é¡</th>
                                    <th class="fw-normal">ä¸‹å–®æ™‚é–“</th>
                                    <th class="fw-normal">ç‹€æ…‹</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in sold_items %}
                                <tr class="border-bottom border-secondary" style="color: white !important;">
                                    <td class="text-white-50">#{{ item.order.id }}</td>
                                    
                                    <td>
                                        <div class="d-flex align-items-center">
                                            {% if item.product.image %}
                                                <img src="{{ item.product.image.url }}" class="rounded me-2" style="width: 40px; height: 40px; object-fit: cover;">
                                            {% endif %}
                                            <span class="fw-bold text-white">{{ item.product.name }}</span>
                                        </div>
                                    </td>
                                    
                                    <td>
                                        <div class="d-flex align-items-center text-white">
                                            <i class="bi bi-person-circle text-white-50 me-2"></i> 
                                            {{ item.order.buyer.username }}
                                        </div>
                                    </td>
                                    
                                    <td>
                                        <span class="text-info fw-bold">{{ item.order.phone|default:"æœªæä¾›" }}</span>
                                    </td>
                                    
                                    <td class="text-white">{{ item.quantity }}</td>
                                    
                                    <td>
                                        <span class="text-warning fw-bold">${{ item.total }}</span>
                                    </td>
                                    
                                    <td class="small text-white-50">{{ item.order.created_at|date:"Y/m/d H:i" }}</td>
                                    
                                    <td>
                                        <span class="badge bg-light text-dark fw-bold">{{ item.order.status }}</span>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="alert alert-dark text-center py-5 border-secondary">
                <h4 class="text-white">ç›®å‰é‚„æ²’æœ‰æ”¶åˆ°è¨‚å–® ğŸƒ</h4>
                <p class="text-white-50">åˆ¥æ°£é¤’ï¼ŒæŒçºŒä¸Šæ¶å¥½å•†å“ï¼Œå®¢äººé¦¬ä¸Šå°±ä¾†ï¼</p>
            </div>
        {% endif %}
    </div>
</div>

<style>
    /* é¡å¤–å°ä¿®æ­£ï¼šç¢ºä¿è¡¨æ ¼ hover æ™‚ä¸æœƒè®Šé»‘ */
    .table-hover tbody tr:hover {
        background-color: rgba(255, 255, 255, 0.05) !important;
        color: white !important;
    }
    /* å¼·åˆ¶æ‰€æœ‰è¡¨æ ¼å…§æ–‡å­—ç¹¼æ‰¿ç™½è‰² */
    .table td, .table th {
        color: white;
    }
</style>
{% endblock %}